// Wewnątrz startSync() w index.html u radnego
if(d.status === "otwarte") {
    const safeName = (myData.imie + "_" + myData.nazwisko).replace(/\s/g, "_");
    const juzGlosowal = d.lista_glosow && d.lista_glosow[safeName];
    div.innerHTML = "";

    if(d.typ === "standard") {
        // Tryb 1: ZA/PRZECIW/WSTRZ
        ["ZA", "PRZECIW", "WSTRZYMAŁO SIĘ"].forEach(opcja => {
            const b = document.createElement('button');
            b.innerText = opcja;
            b.className = `btn btn-vote ${opcja.startsWith("ZA")?'btn-za':opcja.startsWith("PRZE")?'btn-przeciw':'btn-wstrzymuje'}`;
            if(juzGlosowal) b.disabled = true;
            b.onclick = async () => {
                await updateDoc(docRef, { 
                    [`wyniki.${opcja}`]: increment(1), 
                    [`lista_glosow.${safeName}`]: opcja 
                });
            };
            div.appendChild(b);
        });
    } else {
        // Tryb 2: NA NAZWISKA (Pobieranie listy obecnych)
        d.obecni.forEach(osoba => {
            const b = document.createElement('button');
            b.innerText = osoba;
            b.className = "btn btn-main";
            b.style.marginBottom = "5px";
            if(juzGlosowal) b.disabled = true;
            b.onclick = async () => {
                await updateDoc(docRef, { [`lista_glosow.${safeName}`]: "Głos na: " + osoba });
            };
            div.appendChild(b);
        });
    }
}
